import{i as u,j as s}from"./index-a4fe411b.js";const{VITE_APP_API:c,VITE_APP_PATH:l}={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"amberhh",BASE_URL:"/HH-STAY/",MODE:"production",DEV:!1,PROD:!0},p=u("cartStore",{state:()=>({carts:[],cartStatus:!1,cartLength:null,cartTotal:null,cartItemTotal:null,orderStatus:"cartlist"}),actions:{getCartList(){s.get(`${c}v2/api/${l}/cart`).then(t=>{this.carts=t.data.data,this.cartLength=this.carts.carts.length,this.cartLength===0?this.cartStatus=!1:this.cartStatus=!0,this.countCartTotal()}).catch(t=>{alert(t.response.data.message)})},removeCartItem(t){s.delete(`${c}v2/api/${l}/cart/${t}`).then(()=>{alert("已刪除購物車品項"),this.getCartList()}).catch(a=>{alert(a.data.message)})},removeAllCart(){s.delete(`${c}v2/api/${l}/carts`).then(()=>{alert("已清空購物車"),this.getCartList()}).catch(t=>{alert(t.data.message)})},addToCart(t,a,e,r,o=0,n=0){if(r===null){alert("請選擇日期");return}const i={product_id:t,qty:0,ticketA_qty:a,ticketB_qty:e,date:r,cartItemTotal:a*o+e*n};s.post(`${c}v2/api/${l}/cart`,{data:i}).then(h=>{alert(h.data.message),this.getCartList()}).catch(h=>{alert(h.response.data.message)})},countCartTotal(){this.cartTotal=this.carts.carts.reduce((t,a)=>t+a.cartItemTotal,0)},updateItemQty(t,a,e=0,r=0,o=0,n=0){if(e<=0&&r<=0){alert("是否要刪除該品項");return}if(e<=-1||r<=-1)return;const i={product_id:a,qty:0,ticketA_qty:e,ticketB_qty:r,cartItemTotal:e*o+r*n};s.put(`${c}v2/api/${l}/cart/${t}`,{data:i}).then(()=>{alert("已更新產品數量"),this.getCartList()}).catch(h=>{alert(h.response.data.message)})},updateItemDate(t,a,e){const r={product_id:a,qty:0,date:e};s.put(`${c}v2/api/${l}/cart/${t}`,{data:r}).then(()=>{alert("已更新產品日期"),this.getCartList()}).catch(o=>{alert(o.response.data.message)})},changeStatus(t){this.orderStatus=`${t}`}}});export{p as c};
