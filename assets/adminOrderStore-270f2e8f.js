import{p as o,q as r}from"./index-f35bbac0.js";const{VITE_APP_API:a,VITE_APP_PATH:s}={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"amberhh",BASE_URL:"/HH-STAY/",MODE:"production",DEV:!1,PROD:!0},l=o("adminOderStore",{state:()=>({orders:[],pages:{},isLoading:!1,allOrders:[],totalPages:0,pageArr:[],marRevenue:0,aprRevenue:0,revenue:[0,0],bestSellerProduct:[]}),actions:{getOrder(e=1){this.isLoading=!0,r.get(`${a}v2/api/${s}/admin/orders/?page=${e}`).then(t=>{this.orders=t.data.orders,this.pages=t.data.pagination,this.isLoading=!1}).catch(t=>{alert(t.response.data.message)})},getTotalPages(){this.isLoading=!0,this.pageArr=[],r.get(`${a}v2/api/${s}/admin/orders`).then(e=>{this.totalPages=e.data.pagination.total_pages;for(let t=1;t<=5;t++)this.pageArr.push(t);this.getAllOrder()}).catch(e=>{alert(e.response.data.message)})},getAllOrder(){this.allOrders=[],Promise.all(this.pageArr.map(e=>r.get(`${a}v2/api/${s}/admin/orders/?page=${e}`).then(t=>{t.data.orders.forEach(i=>{this.allOrders.push(i)})}))).then(()=>{this.renderRevenueChart(),this.bestSellerChart(),this.isLoading=!1})},renderRevenueChart(){this.marRevenue=0,this.aprRevenue=0,this.revenue=[0,0],this.allOrders.forEach(e=>{e.create_at>=1677600050&&e.create_at<=1680278399?this.marRevenue+=e.user.cartTotal:e.create_at>=1680278400&&e.create_at<=1682870399&&(this.aprRevenue+=e.user.cartTotal)}),this.revenue.push(this.marRevenue,this.aprRevenue,0,0)},bestSellerChart(){this.bestSellerProduct=[],this.allOrders.forEach(e=>{this.bestSellerProduct.push(e.products)}),console.log(this.bestSellerProduct)}}});export{l as a};
